{{#if fcKey}}# FC: {{fcKey}}
{{/if}}{{#if droneSize}}# Drone Size: {{droneSize}}
{{/if}}{{#if manticoreKey}}# Manticore: {{manticoreKey}}
{{/if}}{{#if vtxKey}}# VTX: {{vtxKey}}
{{/if}}{{#if gpsEnabled}}# GPS: {{gpsEnabled}}
{{/if}}{{#if craftName}}# Craft Name: {{craftName}}
{{/if}}

defaults nosave

batch start

defaults nosave

{{!-- Flight Controller Configuration Blocks --}}
{{#if (eq fcKey 'FLASHHOBBYF405')}}
set pid_process_denom = 2
{{/if}}

{{#if (eq fcKey 'SPEEDYBEEF405V3')}}
set pid_process_denom = 1
{{/if}}

{{#if (eq fcKey 'TAKERF722SE')}}
set pid_process_denom = 1
set cpu_overclock = ON
{{/if}}

{{#if (eq fcKey 'GEPRCF722')}}
set pid_process_denom = 1
set cpu_overclock = ON
{{/if}}

{{!-- Drone Size Configuration Block --}}
{{!-- Motor settings optimized for different frame sizes --}}
{{#if droneSize}}
# Drone Size: {{droneSize}}"
{{#if (eq droneSize '7')}}
set motor_pwm_rate = 32000
set motor_poles = 12
{{/if}}
{{#if (eq droneSize '8')}}
set motor_pwm_rate = 24000
set motor_poles = 14
{{/if}}
{{#if (eq droneSize '9')}}
set motor_pwm_rate = 24000
set motor_poles = 16
{{/if}}
{{#if (eq droneSize '10')}}
set motor_pwm_rate = 16000
set motor_poles = 18
{{/if}}
{{#if (eq droneSize '13')}}
set motor_pwm_rate = 12000
set motor_poles = 20
{{/if}}
{{#if (eq droneSize '15')}}
set motor_pwm_rate = 8000
set motor_poles = 22
{{/if}}
{{/if}}

{{!-- Manticore System Configuration Blocks --}}
{{#if (eq manticoreKey 'UART')}}
# Manticore UART variant
# Configure UART ports for Manticore communication
set uart1_function = RX_SERIAL
set uart2_function = TELEMETRY
{{/if}}

{{#if (eq manticoreKey 'GPIO')}}
# Manticore GPIO variant
# Configure GPIO pins for Manticore interface
set gpio_output = ON
set gpio_mode = ALTERNATE
{{/if}}

{{!-- Video Transmitter (VTX) Configuration Blocks --}}
{{#if (eq vtxKey '5.8VTX')}}
# 5.8GHz VTX settings
# Standard 5.8GHz video transmitter configuration
set vtx_band = A
set vtx_channel = 1
set vtx_power = 25
{{/if}}

{{#if (eq vtxKey '3.3VTX')}}
# 3.3GHz VTX settings
# Long-range 3.3GHz video transmitter configuration
set vtx_band = B
set vtx_channel = 3
set vtx_power = 100
{{/if}}

{{#if (eq vtxKey 'OPTICA')}}
# Optica VTX settings
# Digital video transmitter configuration
set vtx_band = O
set vtx_channel = 2
set vtx_power = 50
{{/if}}

{{!-- GPS Configuration Block --}}
{{#if gpsEnabled}}
# GPS Enabled
# Enable GPS functionality with auto baudrate detection
feature GPS
set gps_baudrate = AUTO
{{/if}}

{{!-- Custom Craft Name Configuration Block --}}
{{#if craftName}}
# Craft name
# Set custom identification name for the craft
set craft_name = {{craftName}}
{{/if}}