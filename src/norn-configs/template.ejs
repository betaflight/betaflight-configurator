<%if (fcKey) { %># FC: <%= fcKey %>
<% } %><% if (droneSize) { %># Drone Size: <%= droneSize %>
<% } %><% if (manticoreKey) { %># Manticore: <%= manticoreKey %>
<% } %><% if (vtxKey) { %># VTX: <%= vtxKey %>
<% } %><% if (gpsEnabled) { %># GPS: <%= gpsEnabled %>
<% } %><% if (craftName) { %># Craft Name: <%= craftName %>
<% } %>

defaults nosave

batch start

defaults nosave

<%# Flight Controller Configuration Blocks %>
<% if (fcKey === 'FLASHHOBBYF405') { %>
set pid_process_denom = 2
<% } %>

<% if (fcKey === 'SPEEDYBEEF405V3') { %>
set pid_process_denom = 1
<% } %>

<% if (fcKey === 'TAKERF722SE') { %>
set pid_process_denom = 1
set cpu_overclock = ON
<% } %>

<% if (fcKey === 'GEPRCF722') { %>
set pid_process_denom = 1
set cpu_overclock = ON
<% } %>

<%# Drone Size Configuration Block %>
<%# Motor settings optimized for different frame sizes %>
<% if (droneSize) { %>
# Drone Size: <%= droneSize %>"
<% if (droneSize === '7') { %>
set motor_pwm_rate = 32000
set motor_poles = 12
<% } else if (droneSize === '8') { %>
set motor_pwm_rate = 24000
set motor_poles = 14
<% } else if (droneSize === '9') { %>
set motor_pwm_rate = 24000
set motor_poles = 16
<% } else if (droneSize === '10') { %>
set motor_pwm_rate = 16000
set motor_poles = 18
<% } else if (droneSize === '13') { %>
set motor_pwm_rate = 12000
set motor_poles = 20
<% } else if (droneSize === '15') { %>
set motor_pwm_rate = 8000
set motor_poles = 22
<% } %>
<% } %>

<%# Manticore System Configuration Blocks %>
<% if (manticoreKey === 'UART') { %>
# Manticore UART variant
# Configure UART ports for Manticore communication
set uart1_function = RX_SERIAL
set uart2_function = TELEMETRY
<% } %>

<% if (manticoreKey === 'GPIO') { %>
# Manticore GPIO variant  
# Configure GPIO pins for Manticore interface
set gpio_output = ON
set gpio_mode = ALTERNATE
<% } %>

<%# Video Transmitter (VTX) Configuration Blocks %>
<% if (vtxKey === '5.8VTX') { %>
# 5.8GHz VTX settings
# Standard 5.8GHz video transmitter configuration
set vtx_band = A
set vtx_channel = 1
set vtx_power = 25
<% } %>

<% if (vtxKey === '3.3VTX') { %>
# 3.3GHz VTX settings
# Long-range 3.3GHz video transmitter configuration
set vtx_band = B
set vtx_channel = 3
set vtx_power = 100
<% } %>

<% if (vtxKey === 'OPTICA') { %>
# Optica VTX settings
# Digital video transmitter configuration
set vtx_band = O
set vtx_channel = 2
set vtx_power = 50
<% } %>

<%# GPS Configuration Block %>
<% if (gpsEnabled) { %>
# GPS Enabled
# Enable GPS functionality with auto baudrate detection
feature GPS
set gps_baudrate = AUTO
<% } %>

<%# Custom Craft Name Configuration Block %>
<% if (craftName) { %>
# Craft name
# Set custom identification name for the craft
set craft_name = <%= craftName %>
<% } %>

